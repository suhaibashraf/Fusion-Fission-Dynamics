<pre><font color="#007f69">breed</font><font color="#000000"> [ wanderers wanderer ]  </font><font color="#5a5a5a">;; big red turtle that moves around</font><font color="#000000"><br /></font><font color="#660096">breed</font><font color="#000000"> [ standers stander ]    </font><font color="#5a5a5a">;; little gray turtles that just stand there</font><font color="#000000"><br /></font><font color="#007f69">globals</font><font color="#000000"> [flockmates flockmate<br />         nearest-neighbours nearest-neighbor]<br /><br /></font><font color="#007f69">to</font><font color="#000000"> setup<br />  </font><font color="#0000aa">clear-all</font><font color="#000000"><br />  </font><font color="#5a5a5a">;; make a background of lots of randomly scattered</font><font color="#000000"><br />  </font><font color="#5a5a5a">;; stationary gray turtles</font><font color="#000000"><br />  create-standers </font><font color="#963700">1</font><font color="#000000"><br />  [<br />   </font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">random-xcor</font><font color="#000000"> </font><font color="#660096">random-ycor</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">gray</font><font color="#000000"><br />      </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">10</font><font color="#000000"><br />  </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">Shape</font><font color="#000000"> </font><font color="#963700">&quot;Circle&quot;</font><font color="#000000"><br /><br />  ]<br />  </font><font color="#5a5a5a">;; make one big red turtle that is going to move around</font><font color="#000000"><br />  create-wanderers population<br />  [<br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">White</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">8</font><font color="#000000"><br />    </font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">random-xcor</font><font color="#000000"> </font><font color="#660096">random-ycor</font><font color="#000000"><br />  ]<br />  </font><font color="#0000aa">reset-ticks</font><font color="#000000"><br /><br />  </font><font color="#5a5a5a">;; make the vision cone initially visible</font><font color="#000000"><br />  go<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> go<br />  </font><font color="#0000aa">ask</font><font color="#000000"> standers [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">gray</font><font color="#000000"> ]<br />  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">black</font><font color="#000000">]<br />  </font><font color="#0000aa">ask</font><font color="#000000"> wanderers<br />  [<br /><br />   </font><font color="#0000aa">rt</font><font color="#000000"> search-angle<br />  </font><font color="#0000aa">lt</font><font color="#000000"> search-angle<br />    </font><font color="#0000aa">fd</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"><br />    flock<br />    </font><font color="#5a5a5a">;; could use IN-CONE-NOWRAP here instead of IN-CONE</font><font color="#000000"><br /><br />    </font><font color="#0000aa">ifelse</font><font color="#000000"> Show-vision-cone?<br />    [ </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">in-cone</font><font color="#000000"> visiond visionAng [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">white</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">5</font><font color="#000000">]]<br />    []<br /><br />    </font><font color="#0000aa">ifelse</font><font color="#000000"> show-travel-line?<br />    [</font><font color="#0000aa">pen-down</font><font color="#000000">][</font><font color="#0000aa">pen-up</font><font color="#000000">]<br /><br /><br />  ]<br />  </font><font color="#0000aa">tick</font><font color="#000000"><br />    </font><font color="#0000aa">ask</font><font color="#000000"> standers [<br />   </font><font color="#0000aa">fd</font><font color="#000000"> Speed<br /><br /><br />    ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> flock  </font><font color="#5a5a5a">;; turtle procedure</font><font color="#000000"><br />  find-flockmates<br />  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> flockmates<br />    [<br /><br />      find-nearest-neighbor<br /><br /><br /><br /><br />         </font><font color="#0000aa">ifelse</font><font color="#000000"> </font><font color="#660096">distance</font><font color="#000000"> nearest-neighbor </font><font color="#660096">&lt;</font><font color="#000000"> perspace<br />      [<br /><br />        </font><font color="#0000aa">rt</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">180</font><font color="#000000"><br />      </font><font color="#0000aa">fd</font><font color="#000000"> escape-jump<br /></font><font color="#5a5a5a">;       rt search-angle</font><font color="#000000"><br /></font><font color="#5a5a5a">;      lt search-angle</font><font color="#000000"><br />        </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000"><br /><br />      ]<br /><br />      [<br /><br />       </font><font color="#0000aa">ifelse</font><font color="#000000"> </font><font color="#660096">distance</font><font color="#000000"> nearest-neighbor </font><font color="#660096">&lt;</font><font color="#000000"> near-view<br />      [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">orange</font><font color="#000000"><br />       </font><font color="#0000aa">rt</font><font color="#000000"> </font><font color="#963700">20</font><font color="#000000"><br />       </font><font color="#0000aa">lt</font><font color="#000000"> </font><font color="#963700">20</font><font color="#000000"><br />        </font><font color="#0000aa">fd</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"><br />      ]<br /><br />        [<br />              </font><font color="#0000aa">ifelse</font><font color="#000000"> </font><font color="#660096">distance</font><font color="#000000"> nearest-neighbor </font><font color="#660096">&lt;</font><font color="#000000"> max-view<br />      [<br />            </font><font color="#0000aa">face</font><font color="#000000"> nearest-neighbor<br />      </font><font color="#0000aa">fd</font><font color="#000000"> joining-jump<br /><br />        </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">yellow</font><font color="#000000"><br /><br />      ]<br />          [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">white</font><font color="#000000">]<br /><br /><br />        ]<br />      ]<br /><br /><br /><br /><br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /><br /><br /></font><font color="#007f69">to</font><font color="#000000"> find-flockmates<br />  </font><font color="#0000aa">set</font><font color="#000000"> flockmates </font><font color="#660096">other</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#660096">in-cone</font><font color="#000000"> max-view visionAng<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> find-nearest-neighbor<br />  </font><font color="#0000aa">set</font><font color="#000000"> nearest-neighbor </font><font color="#660096">min-one-of</font><font color="#000000"> flockmates [</font><font color="#660096">distance</font><font color="#000000"> </font><font color="#660096">myself</font><font color="#000000">]<br /></font><font color="#007f69">end</font>
</pre>
